## å‰è¨€

ä½œä¸º Android å¼€å‘è€…ï¼Œä¸çŸ¥ä½ æ˜¯å¦ä¹Ÿæœ‰è¿™æ ·çš„ä½“éªŒï¼Œéšç€é¡¹ç›®å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œå„ç§ä¸åŒåœ†è§’çš„ shapeï¼Œä¸åŒé€æ˜åº¦çš„ colorï¼Œä¸åŒå¤§å°çš„é˜´å½±æ•ˆæœï¼Œå®ƒä»¬ä½¿èµ„æºæ–‡ä»¶è¶Šæ¥è¶Šå¤š

æˆ‘è®¤ä¸ºé€ æˆè¿™ç§é—®é¢˜çš„åŸå› æœ‰ä¸¤ä¸ªï¼šä¸€ä¸ªæ˜¯äº§å“è®¾è®¡çš„ä¸è§„èŒƒï¼Œæ•´ä¸ª app æ²¡æœ‰ç»Ÿä¸€çš„è®¾è®¡é£æ ¼ï¼›ç¬¬äºŒä¸ªä¾¿æ˜¯å¼€å‘è€…åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç¼–ç çš„ä¸è§„èŒƒ



Android Dev Summit '19  æœ‰ä¸€åœºå…³äº Style ä¸ Theme çš„æ¼”è®²ï¼Œå®ƒçš„ [ä¸­æ–‡å­—å¹•è§†é¢‘åœ¨è¿™é‡Œ](https://www.bilibili.com/video/BV1uJ411h7jh)

æˆ‘ä¸ºä½ æ•´ç†äº†æ¯ä¸ªä¸»é¢˜æ‰€åœ¨çš„ä½ç½®

| **æ—¶é—´** |     **å†…å®¹**     |
| :------: | :--------------: |
|  02ï¼š14  | Styling vs Theme |
|  08ï¼š55  |  Theme Overlay   |
|  12ï¼š36  |      Color       |
|  17ï¼š35  |  ä½¿ç”¨åŠä¸‰ä¸ªæŠ€å·§  |
|  24ï¼š00  |  Material é¢œè‰²   |
|  28ï¼š06  |  Material æ’ç‰ˆ   |
|  30ï¼š07  |  Material å½¢çŠ¶   |
|  34ï¼š41  |    Dark Theme    |

åœ¨è§†é¢‘ä¸‹æ–¹çš„è¯„è®ºåŒºï¼Œç‚¹å‡»ç›¸åº”æ—¶é—´å³å¯è·³è½¬åˆ°æŒ‡å®šå†…å®¹

![è§†é¢‘ä¸‹æ–¹è¯„è®ºåŒº](https://gitee.com/flywith24/Album/raw/master/img/20200627112923.png)

ä¸ä¹‹å¯¹åº”çš„æœ‰ä¸€ä¸ª Styling çš„ç³»åˆ—æ–‡ç« ï¼Œæˆ‘æœ€è¿‘ç¿»è¯‘æˆäº†ä¸­æ–‡

- [ã€è¯‘ã€‘Android Styling 1ï¼š Themes vs Styles](https://juejin.im/post/5eead9196fb9a058734e3b03)


- [ã€è¯‘ã€‘Android Styling 2ï¼š å¸¸ç”¨ä¸»é¢˜å±æ€§](https://juejin.im/post/5eec07416fb9a058835d0306)


- [ã€è¯‘ã€‘Android Styling 3ï¼š ä½¿ç”¨ä¸»é¢˜å’Œä¸»é¢˜å±æ€§çš„ä¼˜åŠ¿](https://juejin.im/post/5eed67b4f265da02a642bd57)


- [ã€è¯‘ã€‘Android Styling 4ï¼š ä¸»é¢˜å®æˆ˜](https://juejin.im/post/5eeff86cf265da02e8177eba)



æœ¬æ–‡æ•´ç†äº†è§†é¢‘ä¸æ–‡ç« ä¸­çš„å†…å®¹ï¼Œä»‹ç»åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åº”å¦‚ä½•åˆ©ç”¨ theme ä¸ style æ›´ä¼˜é›…åœ°ç®¡ç†èµ„æºæ–‡ä»¶ï¼Œå¹¶æä¾›äº†å¾ˆå¤šå®ç”¨çš„æŠ€å·§ï¼Œåœ¨æ ‡é¢˜ä¸­æ‰¾åˆ°æŠ€å·§ç›¸å…³çš„æŸ¥çœ‹å³å¯

å¹¶ä¸”æä¾›äº†æ¼”ç¤º demoï¼Œæ•ˆæœå¦‚ä¸‹

![demo](https://user-gold-cdn.xitu.io/2020/6/24/172e4f36ad93089b?w=429&h=957&f=gif&s=1172512)



## ç†è§£ Style ä¸ Theme çš„åŒºåˆ«

è¿™éƒ¨åˆ†å†…å®¹åœ¨è§†é¢‘çš„ 02.14 å¤„

Style æ˜¯ View å±æ€§çš„é›†åˆï¼Œå¯ä»¥å°† Style è§†ä¸º  Map<**View** Attribute, Resource>ï¼Œå…¶ä¸­ key ä¸º View çš„å±æ€§ï¼Œvalue ä¸ºèµ„æº



![sytle key ä¸º View Attributes](https://gitee.com/flywith24/Album/raw/master/img/20200624141439.png)

![style value ä¸º Resources](https://gitee.com/flywith24/Album/raw/master/img/20200624141526.png)

Resource å¯ä»¥ä¸ºä»¥ä¸‹ç±»å‹

![](https://gitee.com/flywith24/Album/raw/master/img/20200624141844.png)



è€Œ Theme åˆ™ä¸åŒï¼Œå®ƒçš„ key æ˜¯ ã€Œä¸»é¢˜å±æ€§ã€ï¼Œå¾ˆæ˜¾ç„¶ä¸‹å›¾ä¸­çš„ colorPrimary ä¸æ˜¯ä»»ä½• View ä¸­çš„å±æ€§

![ä¸»é¢˜çš„å®šä¹‰](https://gitee.com/flywith24/Album/raw/master/img/20200624142007.png)

ä¸»é¢˜å±æ€§æœ‰ç‚¹åƒæŠŠé…ç½®æŠ½è±¡ä¸ºè¯­ä¹‰åŒ–çš„å‘½åçš„å˜é‡ï¼Œå¹¶æŠŠå®ƒä»¬å¡åˆ° map ä¸­ï¼Œä»¥ä¾¿æœªæ¥ä½¿ç”¨ï¼Œä¸»é¢˜å±æ€§ ä¸ View å±æ€§å¾ˆåƒï¼Œå®ƒä»¬åœ¨ attr ä¸­å®šä¹‰çš„æ–¹å¼ä»¥åŠå¯¹åº”çš„ç±»å‹éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œä½†äºŒè€…ä»æœ‰å·®å¼‚

![ä¸»é¢˜å±æ€§çš„å®šä¹‰](https://gitee.com/flywith24/Album/raw/master/img/20200624142058.png)



åœ¨å¼•ç”¨ä¸»é¢˜å±æ€§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `?.attr` è¯­æ³•ï¼Œå…¶ä¸­ ï¼Ÿä»£è¡¨åœ¨å½“å‰ä¸»é¢˜ä¸­æœç´¢

![](https://gitee.com/flywith24/Album/raw/master/img/20200624143028.png)



### ä¸»é¢˜å±æ€§å¸¦æ¥çš„ä¼˜åŠ¿

å¦‚æœæˆ‘ä»¬ app éœ€è¦æ”¯æŒæ™®é€šç‰ˆæœ¬å’Œ Pro ç‰ˆæœ¬ï¼Œå®ƒä»¬çš„ä¸»è‰²ä¸åŒï¼Œæˆ‘ä»¬åªéœ€å®šä¹‰ä¸¤ä¸ªä¸»é¢˜ï¼Œé…ç½®ä¸åŒçš„ colorPrimaryã€‚æ¥ç€æˆ‘ä»¬éœ€è¦é€‚é…æ·±è‰²ä¸»é¢˜ï¼Œé‚£ä¹ˆåªéœ€æä¾›ä¸åŒçš„æ•°å€¼å³å¯

![](https://gitee.com/flywith24/Album/raw/master/img/20200624143616.png)

![valuesæ–‡ä»¶å¤¹ä¸‹ä¸»é¢˜é…ç½®](https://gitee.com/flywith24/Album/raw/master/img/20200624144329.png)

![values-nightæ–‡ä»¶å¤¹ä¸‹ä¸»é¢˜é…ç½®](https://gitee.com/flywith24/Album/raw/master/img/20200624144450.png)



è¿™å°±å¥½æ¯”æˆ‘ä»¬æœ‰ä¸€ä¸ª Theme æŠ½è±¡ç±»ï¼Œè€Œå…¶ä¸­æœ‰ä¸€ä¸ªæŠ½è±¡å±æ€§ colorPrimaryï¼Œå®ƒæœ‰å››ä¸ªå®ç°ç±»ï¼Œåˆ†åˆ«é‡å†™äº† colorPrimary å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬ä¾¿å¾—åˆ°äº† å››ä¸ªå˜ä½“ï¼Œæœªæ¥æƒ³åŠ å…¥æ–°çš„å˜ä½“ï¼Œåªéœ€ç»§æ‰¿è¯¥æŠ½è±¡ç±»å¹¶é‡å†™å±æ€§å³å¯ã€‚çœ‹è¿‡ [ç¬¬ä¸€ç¯‡è¯‘æ–‡](https://juejin.im/post/5eead9196fb9a058734e3b03#heading-6) çš„å°ä¼™ä¼´çŸ¥é“ï¼Œä¸»é¢˜çš„ä½œç”¨èŒƒå›´æ˜¯ ã€Œæ ‘ã€ä¸­çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚è¿™æ ·æˆ‘ä»¬ä¾¿å¾ˆè½»æ¾åœ°å®ç°äº†æ›´æ”¹ç¨‹åºä¸»è‰²çš„åŠŸèƒ½



å¦‚æœè¦ä½¿ç”¨ Style å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å››ç§ Styleã€‚ç”±äº Style çš„ä½œç”¨èŒƒå›´æ˜¯ç‰¹å®š Viewï¼Œå› æ­¤æˆ‘ä»¬è¦ä¸ºæ¯ä¸ª View å‡å®šä¹‰å››å¥— Style



![ä¸¤ç§æ–¹æ¡ˆå¯¹æ¯”](https://gitee.com/flywith24/Album/raw/master/img/20200608153101.png)



### å°ç»“

ç®€å•æ¥è¯´ï¼ŒStyle ä¸ Theme çš„ä½œç”¨èŒƒå›´ä¸åŒ



Style åªä¼šä½œç”¨äºå•ä¸€çš„ View ä¸­ï¼Œä½¿ç”¨æ—¶ç”¨ `style` æ ‡ç­¾

![Style ä½œç”¨èŒƒå›´](https://gitee.com/flywith24/Album/raw/master/img/20200624150457.png)



Theme ä¼šä½œç”¨äºã€Œæ ‘ã€ä¸­çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œä½¿ç”¨æ—¶ç”¨ `theme` æ ‡ç­¾

![theme ä½œç”¨èŒƒå›´](https://gitee.com/flywith24/Album/raw/master/img/20200624150704.png)



åœ¨ä»»æ„æ—¶åˆ»ï¼Œç¨‹åºéƒ½æ˜¯è¿è¡Œåœ¨æŸä¸€ç‰¹å®šä¸»é¢˜ä¸‹çš„ï¼Œä¾‹å¦‚ activity è¢«è®¾ç½®äº†ç‰¹å®šä¸»é¢˜

![](https://gitee.com/flywith24/Album/raw/master/img/20200624150921.png)



æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶åº”è¯¥æ³¨æ„ theme ä¸ style å„è‡ªçš„ä¼˜åŠ¿ï¼Œçµæ´»è¿ç”¨äºŒè€…



## Theme Overlay

è¿™éƒ¨åˆ†å†…å®¹åœ¨è§†é¢‘çš„ 08.55 å¤„



ä¸»é¢˜æ˜¯æœ‰ç»§æ‰¿å…³ç³»çš„ï¼Œå½“è¯¥ç»§æ‰¿å…³ç³»é“¾ä¸­æœ‰å¤šä¸ªä¸»é¢˜é…ç½®äº†åŒä¸€å±æ€§ï¼Œé‚£ä¹ˆæœ€ç»§æ‰¿é“¾æœ€åº•éƒ¨çš„å†…å®¹ä¼šç”Ÿæ•ˆï¼Œåœ¨ä¸‹å›¾ä¸­ï¼Œå¦‚æœå¤šä¸ªä¸»é¢˜éƒ½å£°æ˜äº† colorPrimaryï¼Œé‚£ä¹ˆ Theme.Owl.Pink ä¸­çš„å†…å®¹ä¼šç”Ÿæ•ˆï¼ˆè¿™æœ‰ç‚¹åƒ Java çš„ç»§æ‰¿å…³ç³»ï¼‰

![](https://gitee.com/flywith24/Album/raw/master/img/20200624151431.png)



åˆ©ç”¨è¿™ç§ç»§æ‰¿å…³ç³»æˆ‘ä»¬å¯ä»¥å®ç°åœ¨ç²‰è‰²ä¸»é¢˜ä¸‹å°†éƒ¨åˆ†ç•Œé¢ä½¿ç”¨è“è‰²ä¸»é¢˜



![ç²‰è‰²ä¸»é¢˜ä¸‹ï¼ŒæŸéƒ¨åˆ†éœ€è¦ä¸€ä¸ªè“è‰²ä¸»é¢˜](https://user-gold-cdn.xitu.io/2020/6/18/172c74f73785df66?w=360&h=540&f=gif&s=2076033)



![](https://gitee.com/flywith24/Album/raw/master/img/20200624151353.png)



æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸¤ç§ä¸»é¢˜çš„ç»§æ‰¿å…³ç³»ï¼Œè¿™ä¸¤ç§ä¸»é¢˜çš„çˆ¶çº§åº”è¯¥æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ï¼Œè¿™çœ‹èµ·æ¥æ¯”è¾ƒæµªè´¹ï¼Œå› ä¸ºå¾ˆå¤šå±æ€§æ˜¯ç›¸åŒçš„

![](https://gitee.com/flywith24/Album/raw/master/img/20200624152345.png)

å¦å¤–ï¼Œå½“ä½ æŠŠä¸€ä¸ªä¸»é¢˜è®¾ç½®åœ¨å¦ä¸€ä¸ªä¸»é¢˜ä¹‹ä¸Šï¼Œä½ éœ€è¦æ³¨æ„ä¸èƒ½å°†è‡ªå·±æƒ³è¦ä¿ç•™çš„ä¸œè¥¿è¢«è¦†ç›–æ‰



`Theme Overlay` å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œè€Œæ˜¯å±äºä¸€ç§æŠ€å·§

![Theme Overlay](https://gitee.com/flywith24/Album/raw/master/img/20200624153011.png)

æ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€å…³æ³¨æƒ³è¦æ›´æ”¹çš„ä¸œè¥¿ï¼Œåº”ç”¨ä¸‹å›¾çš„å£°æ˜çš„ä¸»é¢˜ï¼Œåˆ™ä¼šåªæ”¹å˜ colorPrimary å’Œ colorSecondary ä¸¤é¡¹å±æ€§çš„å€¼ï¼Œè€Œå…¶å®ƒçš„æ‰€æœ‰å±æ€§å‡ä¸å˜

![](https://gitee.com/flywith24/Album/raw/master/img/20200624153150.png)

### æŠ€å·§1ï¼šåè½¬é¢œè‰²

MaterialComponents æä¾›äº† æš—è‰²çš„ `Theme Overlay`

![](https://gitee.com/flywith24/Album/raw/master/img/20200624153900.png)

ä½¿ç”¨è¯¥ `Theme Overlay` å¯ä»¥å°†æµ…è‰²ä¸»é¢˜ä¸­çš„æŸéƒ¨åˆ†åšæˆæš—è‰²ä¸»é¢˜



### æŠ€å·§2ï¼šä½¿ç”¨æ­£ç¡®çš„ Context

æˆ‘ä»¬çŸ¥é“ä¸»é¢˜ä¸ Context ç›¸å…³ï¼Œç”±äºä¸Šæ–‡æˆ‘ä»¬æåˆ°çš„ä¸»é¢˜çš„ç»§æ‰¿å…³ç³»ï¼Œä½¿ç”¨æ­£ç¡®çš„ Context å¾ˆé‡è¦

![](https://gitee.com/flywith24/Album/raw/master/img/20200624154828.png)

è®°ä½ï¼šä½¿ç”¨è·ç¦»æœ€è¿‘ View æ‰€åœ¨çš„ Context

![](https://gitee.com/flywith24/Album/raw/master/img/20200624155819.png)



å½“ç„¶æ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨ä¸»é¢˜å±æ€§

![](https://gitee.com/flywith24/Album/raw/master/img/20200624155924.png)



### æŠ€å·§3ï¼šåœ¨ä»£ç ä¸­ä½¿ç”¨ Theme Overlay

å¦‚æœæƒ³è¦åœ¨ä»£ç ä¸­ä½¿ç”¨ `Theme Overlay` ï¼Œå¯ä»¥å°†å…¶åŒ…è£¹ä¸º ContextThemeWrapperï¼Œè¿™ä¹Ÿæ˜¯ `android:theme` æ ‡ç­¾å†…éƒ¨åšçš„äº‹æƒ…

![](https://gitee.com/flywith24/Album/raw/master/img/20200624160158.png)



## ä½¿ç”¨ Theme å’Œ Style

### Color

è¿™éƒ¨åˆ†å†…å®¹åœ¨è§†é¢‘çš„ 12.36 å¤„



ç¨‹åºå†…æœ€é‡è¦çš„èµ„æºä¾¿æ˜¯ Colorï¼ŒAndroid å®šä¹‰ Color æœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œæ¯”å¦‚ Color tagï¼Œå®ƒä¸»è¦ç”± ARGB è‰²å€¼ç»„æˆ

![](https://gitee.com/flywith24/Album/raw/master/img/20200624161608.png)



Color tag ä¹Ÿå¯ä»¥å¼•ç”¨å…¶ä»–çš„ Color tagã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ ä¸èƒ½åœ¨ Color tag å¼•ç”¨ä¸»é¢˜å±æ€§

![](https://gitee.com/flywith24/Album/raw/master/img/20200624162722.png)



ä»¥ä¸Šæ˜¯é™æ€çš„é¢œè‰²ï¼Œä¸‹é¢æˆ‘ä»¬è°ˆä¸€è°ˆæœ‰çŠ¶æ€çš„é¢œè‰²

Color state list å…è®¸ä½ åœ¨ä¸åŒçŠ¶æ€ä¸‹å®šä¹‰ä¸åŒçš„é¢œè‰²ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥ç”¨ä½œ drawableï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œåœ¨ button æŒ‰ä¸‹æˆ–ç¦ç”¨æ—¶éƒ½æœ‰ç›¸åº”çš„é¢œè‰²

![](https://user-gold-cdn.xitu.io/2020/6/24/172e5751055aa09e?w=902&h=583&f=gif&s=1641505)



ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Color state list æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™é‡Œä½¿ç”¨äº† `selector` æ ‡ç­¾ï¼Œæœ¬ç¤ºä¾‹ä¸­æœ‰ä¸¤ä¸ª itemï¼Œç¬¬ä¸€é¡¹å®šä¹‰äº†ä¸€ç§é¢œè‰²ï¼Œå¹¶æŒ‡å®šå®ƒæ˜¯åœ¨é€‰ä¸­çŠ¶æ€ä¸‹æ‰è¢«ä½¿ç”¨ï¼›ç¬¬äºŒé¡¹ æ²¡æœ‰å®šä¹‰ä»»ä½•çŠ¶æ€ï¼Œè¿™æ„å‘³ç€å®ƒæ˜¯é»˜è®¤é¢œè‰²ã€‚å¦‚æœæ²¡æœ‰å…¶ä»–é¢œè‰²å¯ä»¥åŒ¹é…å½“å‰çŠ¶æ€æ—¶ï¼Œå®ƒå°±ä¼šè¢«ä½¿ç”¨



![](https://gitee.com/flywith24/Album/raw/master/img/20200624163629.png)



> è¿™é‡Œæœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œå¯ä»¥å°† Color state list æŒ‰ç…§æœ€å®¹æ˜“å‡ºç°â€”â€”æœ€ä¸å®¹æ˜“å‡ºç°çš„é¡ºåºè¿›è¡Œæ’åºï¼Œè¿™ç”±å…¶èƒŒåçš„å®ç°åŸç†å†³å®šï¼Œç³»ç»Ÿä¼šéå†æ¯ä¸ª item ç›´è‡³æ‰¾å‡ºåŒ¹é…é¡¹



åœ¨ API 21 å®˜æ–¹å¼•å…¥äº† `android:alpha` tag æ¥è®¾ç½®é€æ˜åº¦ï¼Œå¹¶åœ¨ API 23 ä¸­å¯ä»¥å¼•ç”¨ä¸»é¢˜å±æ€§ã€‚å¦‚æœä½ ä½¿ç”¨ AppCompat çš„è¯ï¼Œå®ƒå¯ä»¥å‘ä¸‹å…¼å®¹åˆ° API 14

![](https://gitee.com/flywith24/Album/raw/master/img/20200624164258.png)

#### æŠ€å·§1ï¼šè®¾ç½®é€æ˜åº¦

æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼šå¯¹äºåŒä¸€ä¸ªé¢œè‰²ï¼Œæˆ‘ä»¬éœ€è¦ä¸åŒçš„é€æ˜åº¦ã€‚å› æ­¤æˆ‘ä»¬å¯èƒ½ä¼šå¤åˆ¶ä¸åŒé€æ˜åº¦çš„è‰²å€¼

![](https://gitee.com/flywith24/Album/raw/master/img/20200624164833.png)



ä½ å¯èƒ½ä¸æƒ³åœ¨æ›´æ”¹ä¸€ä¸ªé¢œè‰²åç„¶åå†é€ä¸€æ›´æ”¹å…¶ç›¸åº”é€æ˜åº¦çš„è‰²å€¼ï¼Œæ­¤å¤„æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ColorStateListï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é»˜è®¤é¢œè‰²çš„åŠŸèƒ½ï¼Œåªé…ç½®ä¸€ä¸ª itemï¼Œå¹¶åœ¨æ­¤å¤„é…ç½®é€æ˜åº¦ï¼ˆä» 0 åˆ° 1ï¼‰

![](https://gitee.com/flywith24/Album/raw/master/img/20200624165212.png)



#### æŠ€å·§2ï¼šColorStateList ä¸ Drawable çš„è½¬æ¢

æˆ‘ä»¬åœ¨ View é…ç½® background ç­‰å±æ€§æ—¶å¯ä»¥ç›´æ¥ä¼ å…¥ colorï¼Œåœ¨å†…éƒ¨ç³»ç»Ÿä¼šå¡«å……è¯¥é¢œè‰²å¹¶å°†å…¶åŒ…è£…ä¸º ColorDrawable

![](https://gitee.com/flywith24/Album/raw/master/img/20200624165435.png)



ä½†å¦‚æœä½ å°† ColorStateList ä¼ å…¥æ˜¯ä¸è¡Œçš„ï¼Œåœ¨ API 28 åŠä¹‹å‰çš„è®¾å¤‡ä¼šå´©æºƒ

![](https://gitee.com/flywith24/Album/raw/master/img/20200624165651.png)

è¿™æ˜¯å› ä¸º ColorDrawable æ˜¯æ— çŠ¶æ€çš„ï¼Œåœ¨ Android 10 ä¸­ï¼Œå®˜æ–¹åŠ å…¥äº† ColorStateListDrawable è§£å†³äº†è¿™ä¸€é—®é¢˜



ä¸ºäº†åœ¨æ‰€æœ‰ API ä¸­è·å¾—ç›¸åŒçš„ä½“éªŒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§å˜é€šçš„åšæ³•ï¼Œä½¿ç”¨ `backgroundTint`

![](https://gitee.com/flywith24/Album/raw/master/img/20200624170218.png)

æ­¤å¤„ä½¿ç”¨çº¯è‰²è®¾ç½®äº†ä¸€ä¸ªçŸ©å½¢ï¼Œæ¥ç€ä½¿ç”¨ `backgroundTint` æŒ‡å‘äº† ColorStateList



### å¸¸ç”¨æŠ€å·§

è¿™éƒ¨åˆ†å†…å®¹åœ¨è§†é¢‘çš„ 17.35 å¤„

#### æŠ€å·§1ï¼šæ­£ç¡®å‘½åèµ„æº

æˆ‘ä»¬çš„é¡¹ç›®ä¸­è‚¯å®šæœ‰è¿™æ ·å‘½åçš„èµ„æºï¼Œå®ƒä»¬æ˜¯æŒ‰ç…§ä¸»é¢˜å±æ€§å‘½åçš„ã€‚Android Studio æ–°å»ºé¡¹ç›®é»˜è®¤çš„èµ„æºå°±æ˜¯è¿™æ ·å‘½åçš„

![](https://gitee.com/flywith24/Album/raw/master/img/20200624171109.png)



è€Œä½ çš„ä¸»é¢˜å¤§æ¦‚æ˜¯è¿™æ ·ï¼Œä¸»é¢˜å±æ€§æŒ‡å‘åŒåçš„é¢œè‰²èµ„æº

![](https://gitee.com/flywith24/Album/raw/master/img/20200624171444.png)



è¿™æ ·åšæ˜¯ä¸æ¨èçš„

![](https://gitee.com/flywith24/Album/raw/master/img/20200624171617.png)

æˆ‘ä»¬éœ€è¦çš„ä¸æ˜¯ä¸€ä¸ªè¯­ä¹‰çš„å‘½åï¼Œè€Œæ˜¯éœ€è¦ä¸€ä¸ªæ–‡å­—çš„å‘½åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å“ç‰Œé¢œè‰²å‘½åï¼Œä¹Ÿå¯ä»¥åƒ Material Color Systemï¼Œæ ¹æ®è‰²è°ƒå‘½å

![æ ¹æ®å“ç‰Œå‘½å](https://gitee.com/flywith24/Album/raw/master/img/20200624171933.png)

![æ ¹æ®è‰²è°ƒå‘½å](https://gitee.com/flywith24/Album/raw/master/img/20200624172108.png)



#### æŠ€å·§2ï¼šä½¿ç”¨ç»Ÿä¸€çš„ style åç§°

å¤§å®¶å¯èƒ½è§è¿‡è¿™æ ·çš„æ ·å¼ï¼Œä¸€ä¸ªå« AppThemeï¼Œä¸€ä¸ªå« Toolbarï¼Œä»å‘½åä¾¿å¯ä»¥çœ‹å‡ºå®ƒä»¬çš„ç”¨é€”

![](https://gitee.com/flywith24/Album/raw/master/img/20200624172304.png)



ä½†æ˜¯å¦‚æœæˆ‘ä»¬åŠ å…¥äº†ç¬¬ä¸‰ç§æ ·å¼ï¼Œå®ƒçš„ç”¨é€”ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬æ— æ³•åŒºåˆ†å®ƒæ˜¯ä¸€ä¸ªä¸»é¢˜è¿˜æ˜¯æ ·å¼

![](https://gitee.com/flywith24/Album/raw/master/img/20200624172431.png)



ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥çº¦å®šä¸€ä¸ªå‘½åè§„åˆ™

ç¬¬ä¸€éƒ¨åˆ†ä¸º Style typeï¼šä¸»é¢˜ï¼Œæ ·å¼ï¼Œæ–‡æœ¬å¤–è§‚ï¼ŒTheme Overlayï¼Œå½¢çŠ¶å¤–è§‚ç­‰ç­‰

![ç¬¬ä¸€éƒ¨åˆ†](https://gitee.com/flywith24/Album/raw/master/img/20200624172622.png)



ç¬¬äºŒéƒ¨åˆ†ä¸º Group nameï¼šé€šå¸¸é‡‡ç”¨åº”ç”¨åç§°ï¼Œå¦‚æœæ˜¯å¤š module ä¹Ÿå¯ä»¥ä¸º module å

![ç¬¬äºŒéƒ¨åˆ†](https://gitee.com/flywith24/Album/raw/master/img/20200624172735.png)



ç¬¬ä¸‰éƒ¨åˆ†ä¸º Sub-group nameï¼šè¿™åå­—é€šå¸¸ç”¨äº Widgetï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æ ·å¼çš„ View çš„åç§°

![ç¬¬ä¸‰éƒ¨åˆ†](https://gitee.com/flywith24/Album/raw/master/img/20200624172903.png)



ç¬¬å››éƒ¨åˆ†ä¸º Variant nameï¼šè¿™æ˜¯å¯é€‰çš„ï¼Œå®ƒæ˜¯ä¸»é¢˜çš„å˜é‡

![ç¬¬å››éƒ¨åˆ†](https://gitee.com/flywith24/Album/raw/master/img/20200624182341.png)



å›åˆ°æœ€åˆçš„ä¾‹å­ï¼ŒæŒ‰ç…§æˆ‘ä»¬çº¦å®šçš„å‘½åè§„èŒƒæ”¹é€ å°±å˜æˆäº†è¿™æ ·

![æŒ‰ç…§å‘½åè§„èŒƒå‘½å](https://gitee.com/flywith24/Album/raw/master/img/20200624183125.png)



è¿™é‡Œæœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼Œåœ¨ Android System ä¸­ï¼Œ`.` æ˜¯ä¸€ä¸ªååˆ†ç¥å¥‡çš„ç¬¦å·ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåŸºäºå®ƒçš„éšå«çš„ç»§æ‰¿ç³»ç»Ÿ

ä¸Šå›¾çš„ Widget.MyApp.Toolbar.Blue å®é™…ä¸Šç»§æ‰¿äº†ä¸­é—´çš„è¿™ä¸ªä¸»é¢˜

![](https://gitee.com/flywith24/Album/raw/master/img/20200624183530.png)



è¿™ç§å‘½åè§„èŒƒå¯ä»¥åœ¨ code review æ—¶ç›´è§‚åœ°åˆ¤æ–­å‡º style æˆ– theme æ˜¯å¦ç”¨é”™ã€‚å¦‚ä¸‹å›¾ï¼Œå¾ˆæ˜æ˜¾è¿™é‡Œä½¿ç”¨äº† style æ ‡ç­¾ï¼Œå´ä¼ å…¥äº†ä¸€ä¸ªä¸»é¢˜

![](https://gitee.com/flywith24/Album/raw/master/img/20200624183708.png)

ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨ Lint æ¥è§£å†³æ­¤é—®é¢˜ï¼Œ[è¯¦æƒ…ç§»æ­¥](https://proandroiddev.com/making-android-lint-theme-aware-6285737b13bc)



#### æŠ€å·§3ï¼šæ‹†åˆ†å¤šä¸ªæ–‡ä»¶



##### ç®€å•æ¨¡å¼

å°†èµ„æºç±»å‹æ–‡ä»¶è¿›è¡Œæ ‡å‡†çš„åˆ†ç±»

- `theme.xml` ï¼šTheme å’Œ Theme Overlay
- `type.xml`ï¼šå­—ä½“ï¼Œæ–‡æœ¬å¤–è§‚ï¼Œæ–‡æœ¬å°ºå¯¸ï¼Œå­—ä½“æ–‡ä»¶ç­‰
- `style.xml`ï¼šåªæœ‰ Widget style
- `dimens.xml` `colors.xml` `strings.xml`ï¼šå…¶å®ƒç±»å‹å½’ç±»äºå®é™…çš„èµ„æºç±»å‹

![ç®€å•æ¨¡å¼](https://gitee.com/flywith24/Album/raw/master/img/20200624185037.png)



##### å¤æ‚æ¨¡å¼

å¤æ‚æ¨¡å¼æ˜¯æŒ‰ç…§é€»è¾‘è¿›è¡Œåˆ†ç±»ï¼Œä¾‹å¦‚å½¢çŠ¶ç›¸å…³çš„æ”¾å…¥ `shape.xml`ï¼Œå¦‚æœæƒ³è¦å®ç°å…¨å±çš„UIï¼Œå¯ä»¥åœ¨ `sys_ui.xml` ä¸­æ§åˆ¶çŠ¶æ€æ /å¯¼èˆªæ é¢œè‰²ï¼Œä»¥åŠæ˜¯å¦æ˜¾ç¤ºç­‰ç­‰



![å¤æ‚æ¨¡å¼](https://gitee.com/flywith24/Album/raw/master/img/20200624185154.png)



åœ¨ Android Studio çš„ Android è§†å›¾ä¸‹ï¼Œè¿™æ ·åšçš„æ•ˆæœæ˜¯å¾ˆå¥½çš„ã€‚å¦‚ä¸‹å›¾ï¼Œå¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹åˆ° light ä¸»é¢˜å’Œ dark ä¸»é¢˜çš„ä¸»é¢˜æ–‡ä»¶



![](https://gitee.com/flywith24/Album/raw/master/img/20200624185832.png)





## Material

### é¢œè‰²ç³»ç»Ÿ

è¿™éƒ¨åˆ†å†…å®¹åœ¨è§†é¢‘çš„ 24:00 å¤„

è¯¥ç³»ç»Ÿæ„å»ºåŸºç¡€æ˜¯å¤§é‡ä½¿ç”¨è¯­ä¹‰å‘½åçš„å˜é‡ï¼Œè¿™äº›å˜é‡éƒ½å±äºã€Œä¸»é¢˜å±æ€§ã€ã€‚å®ƒçš„è¿ä½œåŸç†æ˜¯ library å±•ç¤ºä¸è¿™äº›ä½¿ç”¨è¯­ä¹‰å‘½åçš„é¢œè‰²ç›¸å…³çš„ä¸»é¢˜å±æ€§ï¼Œè€Œå¼€å‘è€…è´Ÿè´£ä¸ºè¿™äº›é¢œè‰²æä¾›æ•°å€¼ã€‚åœ¨ library å†…ï¼Œç”¨è¿™äº›é¢œè‰²æ„å»ºæ‰€æœ‰çš„ Widget



å¯¹äºé¢œè‰²ç³»ç»Ÿï¼Œå¼€å‘è€…éœ€è¦äº†è§£ä¸€äº›å¸¸ç”¨çš„é¢œè‰²

![](https://gitee.com/flywith24/Album/raw/master/img/20200624190951.png)

`colorPrimary` å’Œ `colorSecondary` æ˜¯ app å“ç‰Œçš„ä¸»è¦é¢œè‰²ï¼ŒVariant ä¸ºä¸»è‰²çš„å¯¹æ¯”è‰²ï¼›`colorSurface` ååˆ†æœ‰ç”¨ï¼Œå®ƒè´Ÿè´£åœ¨æŸäº›æ§ä»¶è¡¨é¢çš„é¢œè‰²ï¼›`colorError` æ˜¯é”™è¯¯çš„è­¦ç¤ºè‰²ï¼Œå› æ­¤ä½ æ²¡å¿…è¦åœ¨ä½¿ç”¨æ—¶ç¡¬ç¼–ç è¿™äº›é¢œè‰²



é¢œè‰²ç³»ç»Ÿè¿˜ä¼šæä¾›ä¸€äº› `On` å‘½åçš„é¢œè‰²ï¼Œè¿™ç§é¢œè‰²ä¼šä¿è¯æ‹¥æœ‰å’Œç±»ä¼¼åç§°é¢œè‰²å½¢æˆå¯¹æ¯”çš„é¢œè‰²ï¼Œä¾‹å¦‚ `colorOnPrimary` æ°¸è¿œä¼šå’Œ `colorPrimary` å½¢æˆå¯¹æ¯”

![](https://gitee.com/flywith24/Album/raw/master/img/20200624191510.png)



ä½ å¯ä»¥åœ¨è‡ªå·±çš„ä¸»é¢˜ä¸­é…ç½®è¿™äº›é¢œè‰²ï¼Œæ³¨æ„è¿™é‡Œä¸å¿…é…ç½®æ‰€æœ‰çš„é¢œè‰²ï¼Œå¦‚æœä½ ç»§æ‰¿äº†ä¸€äº› Material ä¸»é¢˜ï¼Œå®ƒä»¬ä¼šæä¾›æ‰€æœ‰é¢œè‰²çš„é»˜è®¤è‰²ï¼Œæ¯”å¦‚ä¸‹å›¾ä¸­æ²¡æœ‰è®¾ç½® `colorSurface`ï¼Œåˆ™ä¼šä½¿ç”¨ Material Light ä¸»é¢˜å†…å®šä¹‰çš„ `colorSurface`

![](https://gitee.com/flywith24/Album/raw/master/img/20200624191754.png)



ä¹‹åä½ ä¾¿å¯ä»¥åœ¨ layout æˆ– style ä¸­ä½¿ç”¨è¿™äº›é¢œè‰²äº†

![](https://gitee.com/flywith24/Album/raw/master/img/20200624192323.png)

#### æŠ€å·§

ä¸€ä¸ªæœ‰ç”¨çš„æŠ€å·§æ˜¯å¯ä»¥å°†è¿™äº›é¢œè‰²ä¸ ColorStateList ç»“åˆ

æ¯”å¦‚æˆ‘ä»¬æƒ³åšä¸€ä¸ªåˆ†å‰²çº¿ï¼Œä¸å¿…åˆ›å»ºåä¸º colorDivider çš„æ–°é¢œè‰²ï¼Œç›´æ¥ä» colorOnSurface ä¸­å–ä¸€ä¸ªé¢œè‰²å³å¯ï¼Œè¿™ä¸ªé¢œè‰²è‚¯å®šä¼šå’ŒèƒŒæ™¯è‰²å½¢æˆå¯¹æ¯”

![](https://gitee.com/flywith24/Album/raw/master/img/20200624192538.png)



è€Œä¸”å®ƒä¼šå“åº”ä¸åŒçš„ä¸»é¢˜ï¼Œåœ¨æµ…è‰²ä¸»é¢˜ä¸‹ï¼Œ20% `colorOnSurface` æ˜¯ä¸€ç§é»‘ä¸­å¸¦ç™½çš„é¢œè‰²ã€‚åœ¨æš—è‰²ä¸»é¢˜ä¸‹ï¼Œ`colorOnSurface` ä¼šå˜æˆç™½è‰²ï¼Œæ­¤æ—¶çš„ 20% `colorOnSurface` ä¼šæä¾›åˆé€‚çš„å¯¹æ¯”



![](https://gitee.com/flywith24/Album/raw/master/img/20200624192904.png)



ä»¥è¯­ä¹‰å‘½åçš„é¢œè‰²æ˜¯ååˆ†æœ‰ç”¨çš„ï¼Œä½ å¯ä»¥çœå»å¤§é‡çš„é¢œè‰²å®šä¹‰



### æ’ç‰ˆç³»ç»Ÿ

è¿™éƒ¨åˆ†å†…å®¹åœ¨è§†é¢‘çš„ 28:06 å¤„

åœ¨è®¾è®¡ä¸­ï¼Œé€šå¸¸ä½¿ç”¨å›ºå®šçš„å‡ ç§å­—å·è¿›è¡Œæ’ç‰ˆï¼Œä¾‹å¦‚å¤§æ ‡é¢˜1ï¼Œå¤§æ ‡é¢˜2ï¼Œæ–‡æœ¬ä¸»ä½“ï¼Œå‰¯æ ‡é¢˜ï¼ŒæŒ‰é’®ç­‰ç­‰

![](https://gitee.com/flywith24/Album/raw/master/img/20200624194528.png)

è€Œè¿™äº›éƒ½æ˜¯ä½œä¸ºä¸»é¢˜å±æ€§å®ç°çš„

![](https://gitee.com/flywith24/Album/raw/master/img/20200624194646.png)

ç„¶åä¾¿å¯ä»¥åœ¨åº”ç”¨ä¸­å¼•ç”¨è¿™äº›ä¸»é¢˜å±æ€§

![](https://gitee.com/flywith24/Album/raw/master/img/20200624194743.png)

Material çš„ Text ååˆ†å¼ºå¤§ï¼Œå®ƒå¯ä»¥è®¾ç½®è¡Œé«˜ï¼Œå¦‚æœä½ é‡åˆ°äº†è®¾ç½®è¡Œé«˜å´ä¸ç”Ÿæ•ˆçš„é—®é¢˜ï¼Œä½¿ç”¨ Material ç»„ä»¶å¯ä»¥è§£å†³è¿™ä¸€é—®é¢˜

### å½¢çŠ¶ç³»ç»Ÿ

è¿™éƒ¨åˆ†å†…å®¹åœ¨è§†é¢‘çš„ 30:07 å¤„

Material é‡‡ç”¨äº† [shape system](https://material.io/design/shape)ï¼Œè¯¥ç³»ç»Ÿä¸ºå°å‹ï¼Œä¸­å‹å’Œå¤§å‹ç»„ä»¶ [æä¾›](https://material.io/develop/android/theming/shape/) äº†ä¸»é¢˜å±æ€§ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœè¦åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šè®¾ç½® shapeï¼Œåˆ™å¯èƒ½è¦ä½¿ç”¨ `MaterialShapeDrawable` ä½œä¸ºå…¶èƒŒæ™¯ï¼Œå®ƒå¯ä»¥ç†è§£å¹¶å®ç° shape

è¿™é‡Œæ˜¯é€šè¿‡ ShapeAppearance æ¥å®šä¹‰çš„ï¼ŒShapeAppearance å’Œ TextAppearance ç±»ä¼¼ï¼Œæ˜¯ä¸€ç§é’ˆå¯¹å½¢çŠ¶ç³»ç»Ÿçš„é…ç½®

![](https://gitee.com/flywith24/Album/raw/master/img/20200624195222.png)

å®ƒç”±å‡ ä¸ªç»„ä»¶ç»„æˆ

é¦–å…ˆæ˜¯ cornerFamilyï¼Œæ”¯æŒåœ†è§’å’Œåˆ‡è§’ï¼Œåœ†è§’çš„æ–¹å‘ç­‰ç­‰

![](https://gitee.com/flywith24/Album/raw/master/img/20200624195531.png)



ShapeAppearance  è¿˜æ”¯æŒ overlayï¼Œå¯ä»¥æ›´æ”¹ç‰¹å®šçš„ Widget

![](https://gitee.com/flywith24/Album/raw/master/img/20200624195830.png)



åœ¨ä½¿ç”¨ overlay æ—¶è¦æ³¨æ„çš„æ˜¯å¾ˆå¤š Material ç»„ä»¶æ˜¯æœ‰ç€è‡ªå·±çš„ ShapeAppearance overlayï¼Œä¾‹å¦‚ BottomSheetï¼Œå®ƒä¼šå–æ¶ˆåº•éƒ¨çš„åœ†è§’

![](https://gitee.com/flywith24/Album/raw/master/img/20200627083254.png)

#### æŠ€å·§

å½¢çŠ¶ç³»ç»Ÿæ˜¯ç”± MaterialShapeDrawable å®ç°çš„

![](https://gitee.com/flywith24/Album/raw/master/img/20200627083556.png)



è€Œ MaterialShapeDrawable æœ‰ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½å°±æ˜¯å®ƒæœ‰ç€ä¸€ä¸ªå±æ€§å« interpolation 

![](https://gitee.com/flywith24/Album/raw/master/img/20200627083945.png)



ä½¿ç”¨å®ƒå¯ä»¥ä¸ºå½¢çŠ¶ç³»ç»ŸåšåŠ¨ç”»ï¼Œå¦‚æœå®ƒçš„å€¼ä¸º0ï¼Œé‚£ä¹ˆæ‰€é…ç½®å½¢çŠ¶ä¸ä¼šç”Ÿæ•ˆï¼Œå¦‚æœå€¼ä¸º1ï¼Œé‚£ä¹ˆå½¢çŠ¶ç³»ç»Ÿä¼šå®Œæ•´åœ°åº”ç”¨åˆ° drawable ä¸Š



![](https://user-gold-cdn.xitu.io/2020/6/27/172f33edf584e8e5?w=540&h=648&f=gif&s=2815174)



## æš—é»‘ä¸»é¢˜

è¿™éƒ¨åˆ†å†…å®¹åœ¨è§†é¢‘çš„ 34:41 å¤„



æš—é»‘ä¸»é¢˜çš„é€‚é…å¾ˆç®€å•ï¼Œå¯ä»¥é€šè¿‡ä»£ç è®¾ç½®å½“å‰ä¸»é¢˜å’Œè·å–å½“å‰ä¸»é¢˜

![](https://gitee.com/flywith24/Album/raw/master/img/20200627085246.png)



å¯ä»¥ä½¿ç”¨ Material ç»„ä»¶çš„ DayNightï¼Œè¿™æ ·åœ¨æ‰“å¼€/å…³é—­ æš—é»‘ä¸»é¢˜æ—¶ç›¸åº”çš„ä¸»é¢˜å±æ€§çš„è‰²å€¼éƒ½ä¼šè·Ÿéšå˜åŒ–

![](https://gitee.com/flywith24/Album/raw/master/img/20200627085427.png)



#### æŠ€å·§1 ï¼šæŠ½å–ä¸»é¢˜



å¾ˆå¤šæ—¶å€™åªåšä¸Šé¢çš„ä¸¤æ­¥å¹¶ä¸èƒ½å¾ˆå¥½åœ°é€‚é…æš—é»‘ä¸»é¢˜ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„åº”ç”¨åœ¨æµ…è‰²ä¸»é¢˜ä¸‹æ˜¯è¿™æ ·çš„ï¼Œæ·±è‰²çš„å†…å®¹åœ¨æµ…è‰²çš„èƒŒæ™¯ä¸Š



![](https://gitee.com/flywith24/Album/raw/master/img/20200627105725.png)



è€Œä½¿ç”¨äº†å¤œé—´ä¸»é¢˜ï¼Œå¯èƒ½ä¼šå˜æˆè¿™æ ·



![](https://gitee.com/flywith24/Album/raw/master/img/20200627105830.png)



è€Œæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯è¿™æ ·çš„



![](https://gitee.com/flywith24/Album/raw/master/img/20200627105903.png)



è¿™æ˜¯ç”±äºè®¾ç½®é¢œè‰²æ—¶ç¡¬ç¼–ç å¯¼è‡´çš„

![](https://gitee.com/flywith24/Album/raw/master/img/20200627105942.png)



å®é™…ä¸Šï¼Œè¿™ç§æƒ…å†µä½¿ç”¨ä¸»é¢˜å±æ€§ä¼šæœ‰æ›´å¥½çš„æ•ˆæœ

![](https://gitee.com/flywith24/Album/raw/master/img/20200627110011.png)



å¦‚æœæƒ³è¦ `colorPrimary` åœ¨ä¸åŒçš„ä¸»é¢˜ä¸‹ä½¿ç”¨ä¸åŒçš„é¢œè‰²ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•è®¾ç½®ï¼Ÿ

![](https://gitee.com/flywith24/Album/raw/master/img/20200627110254.png)



æˆ–è®¸ä½ ä¼šåœ¨ `values-night/colors.xml` ä¸ºæš—è‰²ä¸»é¢˜å®šä¹‰è‰²å€¼ï¼Œ**ä½†ä¸å»ºè®®è¿™æ ·åšï¼**

![ä¸å»ºè®®è¿™æ ·ï¼](https://gitee.com/flywith24/Album/raw/master/img/20200627110717.png)



**æœ€å¥½çš„åšæ³•æ˜¯æŠ½å–å…¬å…±éƒ¨åˆ†åˆ°åŸºç¡€ä¸»é¢˜ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šå¯¹æµ…è‰²å’Œæ·±è‰²ä¸»é¢˜åˆ†åˆ«é…ç½®å·®å¼‚åŒ–çš„å±æ€§**

![](https://gitee.com/flywith24/Album/raw/master/img/20200627110812.png)



#### æŠ€å·§2ï¼šColorPrimary çš„ä½¿ç”¨

æœ‰äº›æ—¶å€™æˆ‘ä»¬çš„ colorPrimary æ˜¯ä¸€ç§äº®è‰²ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­çš„è“è‰²ï¼Œä½†åœ¨æš—é»‘ä¸»é¢˜ä¸‹æˆ‘ä»¬æƒ³ä½¿ç”¨ç›¸å¯¹è¾ƒæš—çš„é¢œè‰²ï¼Œä¾‹å¦‚ `?attr/colorSurface`ï¼ŒMaterial ç»„ä»¶å†…éƒ¨ä¸ºæˆ‘ä»¬åšå¥½äº†è½¬æ¢ï¼Œç›´æ¥ä½¿ç”¨ `?attr/colorPrimarySurface` å³å¯

![](https://user-gold-cdn.xitu.io/2020/6/27/172f3c75e62305d5?w=2512&h=1568&f=png&s=2254379)



## Demo

[demoåœ°å€åœ¨è¿™é‡Œ](https://github.com/Flywith24/Flywith24-Theme-demo)ï¼Œå¦‚æœæ„Ÿè§‰å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œç‚¹ä¸€é¢—å°æ˜Ÿæ˜Ÿå§ï½ ğŸ˜‰




## å…³äºæˆ‘

æˆ‘æ˜¯ [Flywith24](https://flywith24.gitee.io/)ï¼Œæˆ‘çš„åšå®¢å†…å®¹å·²ç»åˆ†ç±»æ•´ç† [åœ¨è¿™é‡Œ](https://github.com/Flywith24/BlogList)ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ Watch å¯ä»¥åŠæ—¶è·å–æˆ‘çš„æ–‡ç« æ›´æ–°å“¦ ğŸ˜‰

- [æ˜é‡‘](https://juejin.im/user/57c7f6870a2b58006b1cfd6c)

- [ç®€ä¹¦](https://www.jianshu.com/u/3d5ad6043d66)

- [Github](https://github.com/Flywith24)

  

![](https://gitee.com/flywith24/Album/raw/master/img/20200508153754.jpg)  
